<main class="app-content">
    <div class="app-title">
       <ul class="app-breadcrumb breadcrumb">
         <li class="breadcrumb-item"><a [routerLink]="['/admin/product']">Sản phẩm</a></li>
         <li class="breadcrumb-item">Cập nhật</li>
       </ul>
    </div>
    <div class="row">
      <lib-toastify-toast-container></lib-toastify-toast-container>
       <div class="col-md-12">
          <div class="tile">
             <h3 class="tile-title">Điện thoại</h3>
             <div class="tile-body">
                
                <form class="row" #myForm="ngForm" (ngSubmit)="onSubmit(myForm)">
                  <div class="form-group">
                     <label class="control-label">Tên sản phẩm<span class="text-danger">*</span></label>
                     <input class="form-control" type="text" [(ngModel)]="product.name" name="name" required>
                  </div>

                  <div class="form-group">
                     <label class="control-label">Ảnh sản phẩm<span class="text-danger">*</span></label>  
                     <input class="form-control col-md-6" type="file" id="uploadfile" name="uploadfile" accept="image/*"
                        (change)="onFileSelected($event)" style="height: auto;">
                     
                     <img [src]="imageUrl" alt="Ảnh xem trước" class="mt-2" width="auto" height="150" *ngIf="imageUrl">                     
                  </div>

                  <div class="form-group">
                     <h5>Màn hình</h5>
                  </div>

                  <div class="form-group col-md-6">
                     <label class="control-label">Công nghệ màn hình<span class="text-danger">*</span></label>
                     <input class="form-control" type="text" name="screenTechnology"
                        [(ngModel)]="product.screenTechnology" required>
                  </div>
                  <div class="form-group  col-md-6">
                     <label class="control-label">Độ phân giải màn hình<span class="text-danger">*</span></label>
                     <input class="form-control" type="text" name="screenResolution"
                        [(ngModel)]="product.screenResolution" required>
                  </div>
                  <div class="form-group col-md-6">
                     <label class="control-label">Thông số màn hình<span class="text-danger">*</span></label>
                     <input class="form-control" type="text" name="widescreen" [(ngModel)]="product.widescreen" required>
                  </div>
                  <div class="form-group  col-md-6">
                     <label class="control-label">Độ sáng cao nhất<span class="text-danger">*</span></label>
                     <input class="form-control" type="text" name="maximumBrightness"
                        [(ngModel)]="product.maximumBrightness" required>
                  </div>

                  <div class="form-group">
                     <h5>Camera</h5>
                  </div>

                  <div class="form-group col-md-6">
                     <label class="control-label">Camera sau<span class="text-danger">*</span></label>
                     <input class="form-control" type="text" name="rearCamera" [(ngModel)]="product.rearCamera"
                        required>
                  </div>

                  <div class="form-group col-md-6">
                     <label class="control-label">Camera trước<span class="text-danger">*</span></label>
                     <input class="form-control" type="text" name="frontCamera" [(ngModel)]="product.frontCamera"
                        required>
                  </div>

                  <div class="form-group col-md-6">
                     <label class="control-label">Tính năng camera sau<span class="text-danger">*</span></label>
                     <textarea class="form-control" type="text" name="rearCameraFeature"
                        [(ngModel)]="product.rearCameraFeature" required></textarea>
                  </div>                  

                  <div class="form-group col-md-6">
                     <label class="control-label">Tính năng camera trước<span class="text-danger">*</span></label>
                     <textarea class="form-control" type="text" name="frontCameraFeature"
                        [(ngModel)]="product.frontCameraFeature" required></textarea>
                  </div>

                  <div class="form-group col-md-6">
                     <label class="control-label">Mặt kính cảm ứng<span class="text-danger">*</span></label>
                     <input class="form-control" type="text" name="touchGlass" [(ngModel)]="product.touchGlass"
                        required>
                  </div>

                  <div class="form-group col-md-6">
                     <label class="control-label">Đèn Flash<span class="text-danger">*</span></label>
                     <select class="form-control" id="exampleSelect2" required name="flashLight"
                        [(ngModel)]="product.flashLight">
                        <option value="" required>-- Đèn Flash --</option>
                        <option value="true">Có</option>
                        <option value="false">Không</option>
                     </select>
                  </div>                 

                  <div class="form-group">
                     <h5>Hệ điều hành & CPU</h5>
                  </div>

                  <div class="form-group col-md-6">
                     <label class="control-label">Hệ điều hành<span class="text-danger">*</span></label>
                     <input class="form-control" type="text" name="operationSystem"
                        [(ngModel)]="product.operationSystem" required>
                  </div>

                  <div class="form-group col-md-6">
                     <label class="control-label">Chip xử lý (CPU)<span class="text-danger">*</span></label>
                     <input class="form-control" type="text" name="cpu" [(ngModel)]="product.cpu" required>
                  </div>

                  <div class="form-group col-md-6">
                     <label class="control-label">Tốc độ CPU<span class="text-danger">*</span></label>
                     <input class="form-control" type="text" name="cpuSpeed" [(ngModel)]="product.cpuSpeed" required>
                  </div>
                  <div class="form-group col-md-6">
                     <label class="control-label">Chip đồ họa (GPU)<span class="text-danger">*</span></label>
                     <input class="form-control" type="text" name="graphicChip" [(ngModel)]="product.graphicChip"
                        required>
                  </div>

                  <div class="form-group">
                     <h5>Kết nối</h5>
                  </div>

                  <div class="form-group col-md-6">
                     <label class="control-label">Mạng di động<span class="text-danger">*</span></label>
                     <input class="form-control" type="text" name="mobileNetwork" [(ngModel)]="product.mobileNetwork"
                        required>
                  </div>

                  <div class="form-group col-md-6">
                     <label class="control-label">SIM<span class="text-danger">*</span></label>
                     <input class="form-control" type="text" name="sim" [(ngModel)]="product.sim" required>
                  </div>

                  <div class="form-group col-md-6">
                     <label class="control-label">Wifi<span class="text-danger">*</span></label>
                     <textarea class="form-control" type="text" name="wifi" [(ngModel)]="product.wifi" required></textarea>
                  </div>
                  
                  <div class="form-group col-md-6">
                     <label class="control-label">GPS<span class="text-danger">*</span></label>
                     <textarea class="form-control" type="text" name="gps" [(ngModel)]="product.gps" required></textarea>
                  </div>

                  <div class="form-group col-md-3">
                     <label class="control-label">BlueTooth<span class="text-danger">*</span></label>
                     <input class="form-control" type="text" name="bluetooth" [(ngModel)]="product.bluetooth" required>
                  </div>
                  <div class="form-group col-md-3">
                     <label class="control-label">Cổng sạc<span class="text-danger">*</span></label>
                     <input class="form-control" type="text" name="chargingPort" [(ngModel)]="product.chargingPort"
                        required>
                  </div>
                  <div class="form-group col-md-3">
                     <label class="control-label">Jack tai nghe<span class="text-danger">*</span></label>
                     <input class="form-control" type="text" name="headphoneJack" [(ngModel)]="product.headphoneJack"
                        required>
                  </div>
                  <div class="form-group col-md-3">
                     <label class="control-label">Kết nối khác<span class="text-danger">*</span></label>
                     <input class="form-control" type="text" name="otherPort" [(ngModel)]="product.otherPort" required>
                  </div>

                  <div class="form-group">
                     <h5>Pin & Sạc</h5>
                  </div>

                  <div class="form-group col-md-4">
                     <label class="control-label">Dung lượng pin<span class="text-danger">*</span></label>
                     <input class="form-control" type="text" name="batteryCapacity"
                        [(ngModel)]="product.batteryCapacity" required>
                  </div>                  

                  <div class="form-group col-md-4">
                     <label class="control-label">Loại pin<span class="text-danger">*</span></label>
                     <input class="form-control" type="text" name="batteryType" [(ngModel)]="product.batteryType"
                        required>
                  </div>

                  <div class="form-group col-md-4">
                     <label class="control-label">Hỗ trợ sạc tối đa<span class="text-danger">*</span></label>
                     <input class="form-control" type="text" name="maximumChargingSupport"
                        [(ngModel)]="product.maximumChargingSupport" required>
                  </div>

                  <div class="form-group col-md-4">
                     <label class="control-label">Công nghệ pin<span class="text-danger">*</span></label>
                     <textarea class="form-control" type="text" name="batteryTechnology"
                        [(ngModel)]="product.batteryTechnology" required></textarea>
                  </div>

                  <div class="form-group">
                     <h5>Tiện ích</h5>
                  </div>

                  <div class="form-group col-md-6">
                     <label class="control-label">Bảo mật nâng cao<span class="text-danger">*</span></label>
                     <input class="form-control" type="text" name="advancedSecurity"
                        [(ngModel)]="product.advancedSecurity" required>
                  </div>
                  <div class="form-group col-md-6">
                     <label class="control-label">Tính năng đặc biệt<span class="text-danger">*</span></label>
                     <textarea class="form-control" type="text" name="specialFeature" [(ngModel)]="product.specialFeature"
                        required></textarea>
                  </div>
                  <div class="form-group col-md-6">
                     <label class="control-label">Kháng nước, bụi<span class="text-danger">*</span></label>
                     <input class="form-control" type="text" name="waterDustResistance"
                        [(ngModel)]="product.waterDustResistance" required>
                  </div>
                  <div class="form-group col-md-6">
                     <label class="control-label">Ghi âm<span class="text-danger">*</span></label>
                     <input class="form-control" type="text" name="record" [(ngModel)]="product.record" required>
                  </div>
                  <div class="form-group col-md-6">
                     <label class="control-label">Xem phim<span class="text-danger">*</span></label>
                     <textarea class="form-control" type="text" name="movieSupport" [(ngModel)]="product.movieSupport"
                        required></textarea>
                  </div>
                  <div class="form-group col-md-6">
                     <label class="control-label">Nghe nhạc<span class="text-danger">*</span></label>
                     <textarea class="form-control" type="text" name="musicSupport" [(ngModel)]="product.musicSupport"
                        required></textarea>
                  </div>

                  <div class="form-group">
                     <h5>Thông tin chung</h5>
                  </div>

                  <div class="form-group col-md-6">
                     <label class="control-label">Thiết kế<span class="text-danger">*</span></label>
                     <input class="form-control" type="text" name="design" [(ngModel)]="product.design" required>
                  </div>
                  <div class="form-group col-md-6">
                     <label class="control-label">Chất liệu<span class="text-danger">*</span></label>
                     <input class="form-control" type="text" name="material" [(ngModel)]="product.material" required>
                  </div>
                  <div class="form-group col-md-6">
                     <label class="control-label">Kích thước, khối lượng<span class="text-danger">*</span></label>
                     <input class="form-control" type="text" name="size" [(ngModel)]="product.size" required>
                  </div>
                  <div class="form-group col-md-6">
                     <label class="control-label">Thời điểm ra mắt<span class="text-danger">*</span></label>
                     <input class="form-control" type="text" name="launchDate" [(ngModel)]="product.launchDate"
                        required>
                  </div>

                  <div class="form-group col-md-3">
                     <label class="control-label">Hãng<span class="text-danger">*</span></label>
                     <select class="form-control" id="exampleSelect2" required name="categoryId"
                        [(ngModel)]="product.categoryId">
                        <option value="" required>-- Chọn Hãng --</option>
                        <option *ngFor="let category of categories" [value]="category.id">{{category.name}}</option>
                     </select>
                  </div>

                  <div class="form-group col-md-3">
                     <label class="control-label">Loại khuyến mãi<span class="text-danger">*</span></label>
                     <select class="form-control" id="exampleSelect2" required name="promotionId"
                        [(ngModel)]="product.promotionId">
                        <option value="" required>-- Chọn Loại khuyến mãi --</option>
                        <option *ngFor="let promotion of promotions" [value]="promotion.id">{{promotion.name}}</option>
                     </select>
                  </div>

                  <div class="form-group col-md-3">
                     <label class="control-label">Giá trị khuyến mãi<span class="text-danger">*</span></label>
                     <input class="form-control" type="number" name="promotionValue" [(ngModel)]="product.promotionValue"
                        required>
                  </div>

                  <div class="form-group col-md-3">
                     <label class="control-label">Trạng thái<span class="text-danger">*</span></label>
                     <select class="form-control" id="exampleSelect2" required name="status"
                        [(ngModel)]="product.status">
                        <option value="" required>-- Chọn trạng thái --</option>
                        <option value="true">Có</option>
                        <option value="false">Không</option>
                     </select>
                  </div>

                  <div class="form-group col-md-12">
                     <label class="control-label">Mô tả<span class="text-danger">*</span></label>
                     <ckeditor 
                        [editor]="Editor" 
                        (change)="onChange($event)" 
                        data={{product.description}}
                        tagName="description">         
                     </ckeditor>
                     <!-- <textarea class="form-control" [(ngModel)]="product.description" name="mota" id="mota" disabled></textarea> -->
                  </div>                  

                  <div class="col-md-12 d-flex justify-content-center">
                     <button class="btn btn-save me-3" type="submit">Lưu lại</button>
                     <a class="btn btn-cancel" [routerLink]="['/admin/product']">Quay lại</a> 
                  </div>

                  <div class="form-group d-flex align-items-center">
                     <h5 class="mb-0">Các option sản phẩm</h5>

                     <div class="ml-auto">
                        <a class="btn btn-add btn-sm" data-toggle="modal" data-target="#exampleModalCenter" (click)="showModalBox(id, 0, 'create')">
                           <b><i class="fas fa-plus"></i> Thêm option</b>
                        </a>
                     </div>
                  </div>

                  <table class="table table-hover table-bordered js-copytextarea" cellpadding="0" cellspacing="0" border="0"
                     id="sampleTable">
                     <thead>
                        <tr>
                           <th>STT</th>
                           <th>Hình ảnh</th>
                           <th>RAM</th>
                           <th>Bộ nhớ trong</th>
                           <th>Màu</th>
                           <th>Giá cũ</th>
                           <th>Giá mới</th>
                           <th>Số lượng</th>
                           <th>Trạng thái</th>
                           <th>Hành động</th>
                        </tr>
                     </thead>
                     <tbody>
                        <tr *ngFor="let item of productOptions  | paginate : { itemsPerPage: itemPerPage, currentPage: p };let i = index">
                  
                           <td>#{{ (p - 1) * itemPerPage + i + 1 }}</td>
                           <td><img [src]="item.image" width="auto" height="100" alt="" srcset=""></td>
                           <td>{{item.ram}}GB </td>
                           <td>{{item.storageCapacity}}GB </td>
                           <td>{{item.color}} </td>
                           <td>{{item.price}} </td>
                           <td>{{item.newPrice}} </td>
                           <td>{{item.quantity}} </td>
                  
                           <td>
                              <span class="badge" [ngClass]="{'bg-success': item.status, 'bg-danger': !item.status}">
                                 {{ item.status ? 'Còn hàng' : 'Hết hàng' }}
                               </span>
                           </td>
                  
                           <td>
                              <button class="btn btn-primary btn-sm edit me-1" type="button" title="Sửa" id="show-emp"
                                 (click)="showModalBox(id,item.id,'edit')"><i class="fas fa-edit"></i>
                              </button>
                  
                              <button class="btn btn-primary btn-sm trash" type="button" title="Xóa"
                                 (click)="confirmDeleteOption(item.id)"><i class="fas fa-trash-alt"></i>
                              </button>
                           </td>
                        </tr>
                     </tbody>
                  </table>

                 <p-confirmDialog header="concec" ></p-confirmDialog>
                 <pagination-controls (pageChange)="p = $event"></pagination-controls>                
                  
               </form>               
             </div>                
          </div>
       </div>
    </div>
 </main>